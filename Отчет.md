# Отчёт по развёртыванию Jenkins Pipeline для персонализированного Docker-приложения

## Шаг 1. Создание и конфигурирование Jenkins Job

1. Авторизоваться на Jenkins-сервере по указанному IP и порту.
2. В верхнем меню выбрать **New Item** для создания нового проекта.
3. Задать уникальное имя проекта (рекомендуется формат: `student-имя-фамилия`, например `student-john-doe`).
4. В списке типов проектов выбрать **Pipeline** и нажать **OK**.
5. В открывшемся окне перейти в раздел **Pipeline**:
   - В поле **Definition** выбрать **Pipeline script**.
   - Вставить предоставленный преподавателем **Jenkinsfile**.
   - Отредактировать параметры Jenkinsfile:
     - **STUDENT_NAME** — указать своё имя (для отображения на сайте).
     - **PORT** — указать уникальный порт для развертывания (например, 8081, 8082 и т.д.).
6. Сохранить конфигурацию проекта.

---

## Шаг 2. Структура Jenkinsfile и описание этапов

### Основные моменты

- Все `defaultValue` для **PORT** и **STUDENT_NAME** должны быть заменены на индивидуальные.
- Все контейнеры `hello-student-container` заменить на `hello-surname-container`.
- Все образы `student-fio-app` заменить на `student-surname-app`.

### Структура Jenkinsfile

```groovy
pipeline {
    agent any
    
    parameters {
        string(name: 'STUDENT_NAME', defaultValue: 'Student', description: 'Имя студента')
        string(name: 'PORT', defaultValue: '8081', description: 'Порт')
    }
    
    stages {
        stage('Удаляем старые контейнеры и образы') {
            steps {
                script {
                    sh "docker ps -a -q --filter name=hello-student-container | xargs -r docker rm -f"
                    sh "docker images -q student-fio-app | xargs -r docker rmi -f"
                }
            }
        }
        stage('Выгружаем код из репозитория') {
            steps {
                git 'https://github.com/xDeshka/hellojenkins.git'
            }
        }
        stage('Собираем docker image') {
            steps {
                script {
                    dockerImage = docker.build("student-fio-app")
                }
            }
        }
        stage('Запускаем тесты в докере') {
            steps {
                script {
                    dockerImage.inside {
                        sh 'python -m unittest test_app.py'
                    }
                }
            }
        }
        stage('Запускаем докер контейнер') {
            steps {
                script {
                    sh "docker run -d --name hello-student-container -p ${params.PORT}:${params.PORT} -e STUDENT_NAME='${params.STUDENT_NAME}' -e PORT=${params.PORT} student-fio-app"
                }
            }
        }
    }
}
```

<img width="937" height="571" alt="image" src="https://github.com/user-attachments/assets/9ff318a9-f0e2-456f-ae27-ec6c87cc6f17" />
<img width="1374" height="736" alt="image" src="https://github.com/user-attachments/assets/f9cca14d-2b64-4293-ba83-20d93fbb97ad" />
<img width="1004" height="205" alt="image" src="https://github.com/user-attachments/assets/778e95e2-6604-4954-b243-409024d7cd4f" />
<img width="1366" height="812" alt="image" src="https://github.com/user-attachments/assets/c5eae404-bc78-4340-abb3-918f5b96eb4e" />
